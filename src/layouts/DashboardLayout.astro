---
import { FlashToastListener } from "@/components/flash-toast-listener";
import Logo from "@/components/Logo.astro";
import { Toaster } from "@/components/ui/sonner";
import { consumeFlashToast } from "@/lib/flash-toast";
import Layout from "@/layouts/Layout.astro";
import DashboardShell from "@/layouts/DashboardShell";

interface Props {
  title: string;
}

const { title } = Astro.props;
const currentPath = Astro.url.pathname;
const flashToast = consumeFlashToast(Astro.cookies);
---

<Layout title={title}>
  <Toaster client:load position="top-center" />
  <FlashToastListener client:only="react" flashToast={flashToast} />
  <DashboardShell client:idle currentPath={currentPath}>
    <Logo slot="brand" class="size-10" />
    <slot />
  </DashboardShell>
</Layout>
