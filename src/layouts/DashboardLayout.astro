---
import { FlashToastListener } from "@/components/flash-toast-listener";
import DashboardContent from "@/components/dashboard/DashboardContent.astro";
import DashboardSidebar from "@/components/dashboard/DashboardSidebar.astro";
import { consumeFlashToast } from "@/lib/flash-toast";
import Layout from "@/layouts/Layout.astro";

interface Props {
  title: string;
}

const { title } = Astro.props;
const currentPath = Astro.url.pathname;
const flashToast = consumeFlashToast(Astro.cookies);
---

<Layout title={title}>
  <FlashToastListener client:only="react" flashToast={flashToast} />
  <div class="flex min-h-svh w-full bg-sidebar">
    <DashboardSidebar currentPath={currentPath} />
    <DashboardContent title={title}>
      <slot />
    </DashboardContent>
  </div>
</Layout>
