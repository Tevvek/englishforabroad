---
import ReactLayout from "@/layouts/ReactLayout.astro";
import { ResetPasswordForm } from "./_components/reset-password-form.component";
import { redirect } from "@/utils/actions.utils";

const token = Astro.url.searchParams.get("token");

if (!token) {
  const redirectResponse = redirect({
    message: "Invalid reset link",
    to: "/forgot-password",
    type: "error",
  });
  return Astro.redirect(redirectResponse.to);
}
---

<ReactLayout title="Reset Password - English for Abroad">
  <div class="flex min-h-svh w-full items-center justify-center p-6 md:p-10">
    <div class="w-full max-w-md">
      <ResetPasswordForm token={token} client:load />
    </div>
  </div>
</ReactLayout>
