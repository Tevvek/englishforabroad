---
export const prerender = false;

import DashboardLayout from "@/layouts/dashboard/layout.astro";
import { getCreditBalance } from "@/queries/credits/get-credit-balance.query";
import BookClassWidget from "./_/components/book-class-widget.astro";
import CurrentBalanceText from "./_/components/current-balance-text.astro";

const CLASS_DURATION_MINUTES = 50;

const user = Astro.locals.user!;
const creditBalance = await getCreditBalance(user.id);
---

<DashboardLayout title="Book a Class">
  <div class="space-y-6">
    <section class="space-y-2">
      <h1 class="text-2xl font-semibold">Book a Class</h1>
      <p class="text-sm text-muted-foreground">
        Select a date and book an available class slot in KST.
      </p>
      <p class="text-sm text-muted-foreground">
        1 credit = 1 class ({CLASS_DURATION_MINUTES} minutes)
      </p>
      <CurrentBalanceText creditBalance={creditBalance} />
    </section>

    <BookClassWidget creditBalance={creditBalance} />
  </div>
</DashboardLayout>
